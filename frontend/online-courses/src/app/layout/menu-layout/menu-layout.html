<mat-sidenav-container class="app-container">
  <!-- Sidebar -->
  <mat-sidenav mode="side" opened class="app-sidenav">
    <mat-toolbar color="primary">ðŸ“š Menu</mat-toolbar>
    <mat-nav-list>

     <a mat-list-item routerLink="/admin-dashboard" routerLinkActive="active-link"*ngIf="userRole === 'admin'">
        <mat-icon>dashboard</mat-icon>
        <span class="ml-2">Dashboard</span>
      </a>

       <a mat-list-item routerLink="/student-dashboard" routerLinkActive="active-link"*ngIf="userRole === 'student'">
        <mat-icon>dashboard</mat-icon>
        <span class="ml-2">Dashboard</span>
      </a>

      <a mat-list-item routerLink="/courses" routerLinkActive="active-link">
        <mat-icon>list</mat-icon>
        <span class="ml-2">All Courses</span>
      </a>

      <a mat-list-item routerLink="/admin-users" routerLinkActive="active-link"*ngIf="userRole === 'admin'">
        <mat-icon>people</mat-icon>
        <span class="ml-2">User Management</span>
      </a>

  

      <a mat-list-item routerLink="/my-enrollments" routerLinkActive="active-link" *ngIf="userRole === 'student'">
        <mat-icon>library_books</mat-icon>
        <span class="ml-2">My Enrollments</span>
      </a>
      <a mat-list-item routerLink="/add-course" routerLinkActive="active-link" *ngIf="userRole === 'instructor'">
        <mat-icon>add</mat-icon>
        <span class="ml-2">Add Course</span>
      </a>
      <a mat-list-item routerLink="/students" routerLinkActive="active-link" *ngIf="userRole === 'instructor'">
        <mat-icon>people</mat-icon>
        <span class="ml-2">Students</span>
      </a>
      <a mat-list-item routerLink="/instructors" routerLinkActive="active-link" *ngIf="userRole === 'instructor'">
        <mat-icon>school</mat-icon>
        <span class="ml-2">Instructors</span>
      </a>
      <a mat-list-item routerLink="/assignments" routerLinkActive="active-link"*ngIf="userRole === 'instructor' || userRole === 'student'">
        <mat-icon>assignment</mat-icon>
        <span class="ml-2">Assignments</span>
      </a>
  
      <a mat-list-item routerLink="/my-payments" routerLinkActive="active-link" *ngIf="userRole === 'student'">
        <mat-icon>payments</mat-icon>
        <span class="ml-2">Payments</span>
      </a>
        <a mat-list-item routerLink="/payments" routerLinkActive="active-link" *ngIf="userRole === 'instructor'">
        <mat-icon>payments</mat-icon>
        <span class="ml-2">Payments</span>
      </a>
      <a mat-list-item routerLink="/chat" routerLinkActive="active-link">
        <mat-icon>chat</mat-icon>
        <span class="ml-2">Chat</span>
      </a>
      <a mat-list-item routerLink="/support" routerLinkActive="active-link"*ngIf="userRole === 'instructor' || userRole === 'student'">
        <mat-icon>contact_support</mat-icon>
        <span class="ml-2">Support</span>
      </a>
  
    </mat-nav-list>
  </mat-sidenav>


  <!-- Page Content -->
  <mat-sidenav-content class="app-content">

    <mat-toolbar color="primary" class="app-header">
      <span class="header-title"> Online Course Management</span>
      <span class="spacer"></span>

 <!-- AI Chat for students -->
<app-student-ai-chat *ngIf="userRole === 'student'"></app-student-ai-chat>

<!-- Notification icon for unread messages -->
<mat-icon 
 class="notification-icon"
  matBadge="{{ unreadCount }}" 
  matBadgeColor="warn" 
  *ngIf="unreadCount > 0"
  routerLink="/chat">
  notifications
</mat-icon>

<div class="theme-toggle-wrapper">
<mat-slide-toggle
  (change)="toggleDarkMode()"
  [checked]="isDarkMode"
  class="theme-toggle"
  color="accent"
>
  <mat-icon>{{ isDarkMode ? 'dark_mode' : 'light_mode' }}</mat-icon>
</mat-slide-toggle>
</div>



      <mat-icon>account_circle</mat-icon>
        <span class="ml-2">{{ userName }}</span>
       <!-- Dropdown Trigger -->
  <button mat-icon-button [matMenuTriggerFor]="userMenu">
    <mat-icon>menu</mat-icon>
  </button>

  <!-- Dropdown Content -->
  <mat-menu #userMenu="matMenu">
    <div style="padding: 20px 50px; pointer-events: none;text-align: center;">
      <strong>{{ userName }}</strong>
    </div>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="goToProfile()">
      <mat-icon>person</mat-icon>
      <span>Profile</span>
    </button>
    
    <button mat-menu-item (click)="logout()">
      <mat-icon>logout</mat-icon>
      <span>Logout</span>
    </button>
  </mat-menu>
    </mat-toolbar>

    
    <div class="page-body">
      <router-outlet></router-outlet>
    </div>
    
  </mat-sidenav-content>
</mat-sidenav-container>

